"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[61278],{65885:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var s=t(96540),n=t(9888);const r={watermarkContainer:"watermarkContainer_GZbK",toolContainer:"toolContainer_bUUK",title:"title__Kl9",description:"description_V8Pt",fileInput:"fileInput_hiCV",canvasWrapper:"canvasWrapper_dDIF",canvasContainer:"canvasContainer_BIG3","ratio-4-3":"ratio-4-3_tFSr",canvas:"canvas_zoIg",githubIcon:"githubIcon_zMUO",watermarkFooter:"watermarkFooter_B3me"};var l=t(74848);const c=()=>{const[e,a]=(0,s.useState)({text:"",color:"#7F7F7F",alpha:.5,angle:45,space:4,size:1,autoRefresh:!0}),[t,c]=(0,s.useState)(null),[i,o]=(0,s.useState)(!1),h=(0,s.useRef)(null),d=(0,s.useRef)(),u=(0,s.useRef)();(0,s.useEffect)((()=>{if(!t)return;o(!0);const e=new FileReader;e.onload=e=>{const a=new Image;a.onload=()=>{if(!h.current)return;const e=h.current;e.width=a.width,e.height=a.height;const t=a.width/a.height,s=e.parentElement;s&&(s.style.paddingTop=1/t*100+"%");const n=e.getContext("2d");n&&(u.current=n,d.current=a,n.drawImage(a,0,0,a.width,a.height),p()),o(!1)},a.src=e.target.result},e.readAsDataURL(t)}),[t]);const g=(0,s.useCallback)((e=>{const a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:[127,127,127]}),[]),p=(0,s.useCallback)((()=>{if(!u.current||!h.current||!d.current)return;const{text:a,color:t,alpha:s,angle:n,space:r,size:l}=e,c=h.current,i=u.current,o=l*Math.max(15,Math.min(c.width,c.height)/25);i.clearRect(0,0,c.width,c.height),i.drawImage(d.current,0,0);const[p,x,m]=g(t);i.save(),i.translate(c.width/2,c.height/2),i.rotate(n*Math.PI/180),i.fillStyle=`rgba(${p}, ${x}, ${m}, ${s})`,i.font=`bold ${o}px -apple-system, "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "WenQuanYi Micro Hei", sans-serif`;const j=i.measureText(a).width,b=Math.sqrt(c.width**2+c.height**2),f=i.measureText("\u554a").width,v=Math.ceil(b/(j+f)),C=Math.ceil(b/(r*o)/2);for(let e=-v;e<v;e++)for(let t=-C;t<=C;t++)i.fillText(a,(j+f)*e,r*o*t);i.restore()}),[e,g]),x=(0,s.useCallback)((e=>t=>{let s=t.target.value;switch(t.target.type){case"checkbox":s=t.target.checked;break;case"range":case"number":s=parseFloat(t.target.value)}a((a=>({...a,[e]:s})))}),[]);(0,s.useEffect)((()=>{e.autoRefresh&&p()}),[e,p]);const m=(0,s.useCallback)((()=>{const e=e=>e.toString().padStart(2,"0"),a=new Date;return`${a.getFullYear()}${e(a.getMonth()+1)}${e(a.getDate())}-${e(a.getHours())}${e(a.getMinutes())}${e(a.getSeconds())}.png`}),[]),j=(0,s.useCallback)((()=>{if(!h.current)return;const e=document.createElement("a");e.download=m(),e.href=h.current.toDataURL("image/png"),e.click()}),[m]);return(0,l.jsx)(n.A,{title:"\u56fe\u7247\u6c34\u5370\u5de5\u5177",description:"\u5b89\u5168\u672c\u5730\u5316\u56fe\u7247\u6c34\u5370\u5904\u7406\u5de5\u5177 - \u65e0\u9700\u4e0a\u4f20\uff0c\u4fdd\u62a4\u9690\u79c1",children:(0,l.jsx)("main",{className:r.container,children:(0,l.jsxs)("div",{className:r.toolContainer,children:[(0,l.jsx)("h1",{className:r.title,children:"\u56fe\u7247\u6c34\u5370\u5de5\u5177"}),(0,l.jsx)("article",{className:r.description,children:"\u5b89\u5168\u5730\u4e3a\u4f60\u7684\u56fe\u7247\u6dfb\u52a0\u6c34\u5370\uff0c\u65e0\u9700\u4e0a\u4f20\u56fe\u7247\uff0c\u4ec5\u5728\u672c\u5730\u5904\u7406\uff0c\u7279\u522b\u9002\u5408\u5404\u79cd\u654f\u611f\u8bc1\u4ef6\uff08\u8eab\u4efd\u8bc1\u3001\u9a7e\u7167\u3001\u62a4\u7167\u7b49\uff09\u3002"}),(0,l.jsxs)("div",{className:r.controlGroup,children:[(0,l.jsx)("label",{children:"\u7b2c\u4e00\u6b65\uff1a\u9009\u62e9\u672c\u5730\u56fe\u7247"}),(0,l.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/gif",onChange:e=>c(e.target.files?.[0]||null),className:r.fileInput})]}),(0,l.jsxs)("div",{className:r.controlGroup,children:[(0,l.jsx)("label",{children:"\u7b2c\u4e8c\u6b65\uff1a\u8f93\u5165\u6c34\u5370\u6587\u5b57"}),(0,l.jsx)("input",{type:"text",value:e.text,onChange:x("text"),placeholder:"\u8f93\u5165\u6c34\u5370\u6587\u5b57",className:r.textInput,maxLength:30})]}),(0,l.jsxs)("div",{className:r.controls,children:[(0,l.jsx)("label",{children:"\u7b2c\u4e09\u6b65\uff1a\u8c03\u6574\u6c34\u5370\u72b6\u6001"}),(0,l.jsxs)("div",{className:r.controlItem,children:[(0,l.jsx)("label",{children:"\u989c\u8272 "}),(0,l.jsx)("input",{type:"color",value:e.color,onChange:x("color")})]}),(0,l.jsxs)("div",{className:r.controlItem,children:[(0,l.jsx)("label",{children:"\u900f\u660e\u5ea6 "}),(0,l.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:e.alpha,onChange:x("alpha")}),(0,l.jsxs)("label",{children:[" ",e.alpha.toFixed(2)]})]}),(0,l.jsxs)("div",{className:r.controlItem,children:[(0,l.jsx)("label",{children:"\u89d2\u5ea6 "}),(0,l.jsx)("input",{type:"range",min:"-90",max:"90",step:"3",value:e.angle,onChange:x("angle")}),(0,l.jsxs)("label",{children:[" ",e.angle,"\xb0"]})]}),(0,l.jsxs)("div",{className:r.controlItem,children:[(0,l.jsx)("label",{children:"\u95f4\u8ddd "}),(0,l.jsx)("input",{type:"range",min:"1",max:"16",step:"0.2",value:e.space,onChange:x("space")}),(0,l.jsxs)("label",{children:[" ",e.space,"x"]})]}),(0,l.jsxs)("div",{className:r.controlItem,children:[(0,l.jsx)("label",{children:"\u5b57\u53f7 "}),(0,l.jsx)("input",{type:"range",min:"0.5",max:"3",step:"0.05",value:e.size,onChange:x("size")}),(0,l.jsxs)("label",{children:[" ",e.size,"x"]})]})]}),(0,l.jsxs)("div",{className:r.actionGroup,children:[(0,l.jsx)("label",{children:"\u7b2c\u56db\u6b65\uff1a\u70b9\u51fb\u4e0b\u8f7d\u5e26\u6c34\u5370\u7684\u56fe\u7247"}),(0,l.jsxs)("div",{className:r.controls,children:[(0,l.jsxs)("label",{className:r.toggleLabel,children:[(0,l.jsx)("input",{type:"checkbox",checked:e.autoRefresh,onChange:x("autoRefresh")}),"\u5b9e\u65f6\u9884\u89c8"]}),(0,l.jsx)("button",{onClick:p,disabled:e.autoRefresh,className:r.refreshButton,children:"\u624b\u52a8\u5237\u65b0"})]})]}),(0,l.jsx)("div",{className:r.canvasWrapper,children:(0,l.jsxs)("div",{className:r.canvasContainer,children:[i&&(0,l.jsx)("div",{className:r.loading,children:"\u56fe\u7247\u52a0\u8f7d\u4e2d..."}),(0,l.jsx)("canvas",{ref:h,onClick:j,className:r.canvas,"aria-label":"\u70b9\u51fb\u4e0b\u8f7d\u5e26\u6c34\u5370\u7684\u56fe\u7247"})]})}),(0,l.jsx)("footer",{className:r.watermarkFooter,children:(0,l.jsx)("a",{href:"https://github.com/luhuadong/watermarking",target:"_blank",rel:"noopener noreferrer",children:(0,l.jsx)("img",{src:"https://cdn.jsdelivr.net/gh/Closty/duanwangzhi/github.png",alt:"GitHub\u4ed3\u5e93",className:r.githubLogo})})})]})})})}}}]);