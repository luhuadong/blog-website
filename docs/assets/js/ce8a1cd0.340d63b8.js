"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[61278],{65885:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var s=t(96540),n=t(9888);const l={watermarkContainer:"watermarkContainer_GZbK",toolContainer:"toolContainer_bUUK",layoutWrapper:"layoutWrapper_zO6d",title:"title__Kl9",description:"description_V8Pt",titleLabel:"titleLabel_MSL7",textInput:"textInput_Ymop",controlGroup:"controlGroup_dr1C",actionGroup:"actionGroup_YZMx",fileInput:"fileInput_hiCV",refreshButton:"refreshButton_vWj5",canvasWrapper:"canvasWrapper_dDIF",canvasContainer:"canvasContainer_BIG3","ratio-4-3":"ratio-4-3_tFSr",canvas:"canvas_zoIg",controlsColumn:"controlsColumn_YJF4",canvasColumn:"canvasColumn_L3BT",githubIcon:"githubIcon_zMUO",watermarkFooter:"watermarkFooter_B3me",githubLogo:"githubLogo_C1ns"};var r=t(74848);const c=()=>{const[e,a]=(0,s.useState)({text:"",color:"#7F7F7F",alpha:.5,angle:45,space:4,size:1,autoRefresh:!0}),[t,c]=(0,s.useState)(null),[i,o]=(0,s.useState)(!1),h=(0,s.useRef)(null),u=(0,s.useRef)(),d=(0,s.useRef)();(0,s.useEffect)((()=>{if(!t)return;o(!0);const e=new FileReader;e.onload=e=>{const a=new Image;a.onload=()=>{if(!h.current)return;const e=h.current;e.width=a.width,e.height=a.height;const t=a.width/a.height,s=e.parentElement;s&&(s.style.paddingTop=1/t*100+"%");const n=e.getContext("2d");n&&(d.current=n,u.current=a,n.drawImage(a,0,0,a.width,a.height),m()),o(!1)},a.src=e.target.result},e.readAsDataURL(t)}),[t]);const p=(0,s.useCallback)((e=>{const a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:[127,127,127]}),[]),m=(0,s.useCallback)((()=>{if(!d.current||!h.current||!u.current)return;const{text:a,color:t,alpha:s,angle:n,space:l,size:r}=e,c=h.current,i=d.current,o=r*Math.max(15,Math.min(c.width,c.height)/25);i.clearRect(0,0,c.width,c.height),i.drawImage(u.current,0,0);const[m,g,x]=p(t);i.save(),i.translate(c.width/2,c.height/2),i.rotate(n*Math.PI/180),i.fillStyle=`rgba(${m}, ${g}, ${x}, ${s})`,i.font=`bold ${o}px -apple-system, "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "WenQuanYi Micro Hei", sans-serif`;const j=i.measureText(a).width,v=Math.sqrt(c.width**2+c.height**2),b=i.measureText("\u554a").width,f=Math.ceil(v/(j+b)),C=Math.ceil(v/(l*o)/2);for(let e=-f;e<f;e++)for(let t=-C;t<=C;t++)i.fillText(a,(j+b)*e,l*o*t);i.restore()}),[e,p]),g=(0,s.useCallback)((e=>t=>{let s=t.target.value;switch(t.target.type){case"checkbox":s=t.target.checked;break;case"range":case"number":s=parseFloat(t.target.value)}a((a=>({...a,[e]:s})))}),[]);(0,s.useEffect)((()=>{e.autoRefresh&&m()}),[e,m]);const x=(0,s.useCallback)((()=>{const e=e=>e.toString().padStart(2,"0"),a=new Date;return`${a.getFullYear()}${e(a.getMonth()+1)}${e(a.getDate())}-${e(a.getHours())}${e(a.getMinutes())}${e(a.getSeconds())}.png`}),[]),j=(0,s.useCallback)((()=>{if(!h.current)return;const e=document.createElement("a");e.download=x(),e.href=h.current.toDataURL("image/png"),e.click()}),[x]);return(0,r.jsx)(n.A,{title:"\u56fe\u7247\u6c34\u5370\u5de5\u5177",description:"\u56fe\u7247\u6c34\u5370\uff0c\u7167\u7247\u6c34\u5370\uff0c\u6c34\u5370\u6253\u7801\uff0c\u5b89\u5168\u672c\u5730\u5316\u56fe\u7247\u6c34\u5370\u5904\u7406\u5de5\u5177 - \u65e0\u9700\u4e0a\u4f20\uff0c\u4fdd\u62a4\u9690\u79c1\uff0c\u7279\u522b\u9002\u5408\u5404\u79cd\u654f\u611f\u8bc1\u4ef6\uff08\u8eab\u4efd\u8bc1\u3001\u9a7e\u7167\u3001\u62a4\u7167\u7b49\uff09",children:(0,r.jsx)("main",{className:l.container,children:(0,r.jsxs)("div",{className:l.toolContainer,children:[(0,r.jsx)("h1",{className:l.title,children:"\u56fe\u7247\u6c34\u5370\u5de5\u5177"}),(0,r.jsx)("article",{className:l.description,children:"\u5b89\u5168\u5730\u4e3a\u4f60\u7684\u56fe\u7247\u6dfb\u52a0\u6c34\u5370\uff0c\u65e0\u9700\u4e0a\u4f20\u56fe\u7247\uff0c\u4ec5\u5728\u672c\u5730\u5904\u7406\uff0c\u7279\u522b\u9002\u5408\u5404\u79cd\u654f\u611f\u8bc1\u4ef6\uff08\u8eab\u4efd\u8bc1\u3001\u9a7e\u7167\u3001\u62a4\u7167\u7b49\uff09\u3002"}),(0,r.jsxs)("div",{className:l.layoutWrapper,children:[(0,r.jsxs)("div",{className:l.controlsColumn,children:[(0,r.jsxs)("div",{className:l.controlGroup,children:[(0,r.jsx)("div",{className:l.titleLabel,children:"\u7b2c\u4e00\u6b65\uff1a\u9009\u62e9\u672c\u5730\u56fe\u7247"}),(0,r.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/gif",onChange:e=>c(e.target.files?.[0]||null),className:l.fileInput})]}),(0,r.jsxs)("div",{className:l.controlGroup,children:[(0,r.jsx)("div",{className:l.titleLabel,children:"\u7b2c\u4e8c\u6b65\uff1a\u8f93\u5165\u6c34\u5370\u6587\u5b57 "}),(0,r.jsx)("input",{type:"text",value:e.text,onChange:g("text"),placeholder:"\u8f93\u5165\u6c34\u5370\u6587\u5b57",className:l.textInput,maxLength:30})]}),(0,r.jsxs)("div",{className:l.controls,children:[(0,r.jsx)("div",{className:l.titleLabel,children:"\u7b2c\u4e09\u6b65\uff1a\u8c03\u6574\u6c34\u5370\u72b6\u6001"}),(0,r.jsxs)("div",{className:l.controlItem,children:[(0,r.jsx)("label",{children:"\u989c\u8272 "}),(0,r.jsx)("input",{type:"color",value:e.color,onChange:g("color")})]}),(0,r.jsxs)("div",{className:l.controlItem,children:[(0,r.jsx)("label",{children:"\u900f\u660e\u5ea6 "}),(0,r.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:e.alpha,onChange:g("alpha"),className:l.customSlider}),(0,r.jsxs)("label",{children:[" ",e.alpha.toFixed(2)]})]}),(0,r.jsxs)("div",{className:l.controlItem,children:[(0,r.jsx)("label",{children:"\u89d2\u5ea6 "}),(0,r.jsx)("input",{type:"range",min:"-90",max:"90",step:"3",value:e.angle,onChange:g("angle")}),(0,r.jsxs)("label",{children:[" ",e.angle.toFixed(0),"\xb0"]})]}),(0,r.jsxs)("div",{className:l.controlItem,children:[(0,r.jsx)("label",{children:"\u95f4\u8ddd "}),(0,r.jsx)("input",{type:"range",min:"1",max:"16",step:"0.2",value:e.space,onChange:g("space")}),(0,r.jsxs)("label",{children:[" ",e.space.toFixed(1),"x"]})]}),(0,r.jsxs)("div",{className:l.controlItem,children:[(0,r.jsx)("label",{children:"\u5b57\u53f7 "}),(0,r.jsx)("input",{type:"range",min:"0.5",max:"3",step:"0.05",value:e.size,onChange:g("size")}),(0,r.jsxs)("label",{children:[" ",e.size.toFixed(1),"x"]})]})]}),(0,r.jsxs)("div",{className:l.actionGroup,children:[(0,r.jsx)("div",{className:l.titleLabel,children:"\u7b2c\u56db\u6b65\uff1a\u70b9\u51fb\u4e0b\u8f7d\u5e26\u6c34\u5370\u7684\u56fe\u7247"}),(0,r.jsxs)("div",{className:l.controls,children:[(0,r.jsxs)("label",{className:l.toggleLabel,children:[(0,r.jsx)("input",{type:"checkbox",checked:e.autoRefresh,onChange:g("autoRefresh")}),"\u5b9e\u65f6\u9884\u89c8"]}),(0,r.jsx)("button",{onClick:m,disabled:e.autoRefresh,className:l.refreshButton,children:"\u624b\u52a8\u5237\u65b0"})]})]})]}),(0,r.jsx)("div",{className:l.canvasColumn,children:(0,r.jsx)("div",{className:l.canvasWrapper,children:(0,r.jsxs)("div",{className:l.canvasContainer,children:[i&&(0,r.jsx)("div",{className:l.loading,children:"\u56fe\u7247\u52a0\u8f7d\u4e2d..."}),(0,r.jsx)("canvas",{ref:h,onClick:j,className:l.canvas,"aria-label":"\u70b9\u51fb\u4e0b\u8f7d\u5e26\u6c34\u5370\u7684\u56fe\u7247"})]})})})]}),(0,r.jsx)("footer",{className:l.watermarkFooter,children:(0,r.jsx)("a",{href:"https://github.com/luhuadong/watermarking",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)("img",{src:"/img/github.svg",alt:"GitHub\u4ed3\u5e93",className:l.githubLogo})})})]})})})}}}]);